!function(a,b){a.widget("cjroe.flipper",{options:{_classPrefix:"_flipper",rotationType:"left",depth:1e3,speed:.5,eventListener:"hover"},_prefix:function(a){return[this.options._classPrefix,a].join("-")},_create:function(){this._defaults=this.options,this.container=this.element,this.container.addClass("flipper-container"),this.container.children().filter(function(a){return 2>a}).map(function(b,c){return 0===b?this.front=a(c).addClass(this._prefix("front")):1===b&&(this.back=a(c).addClass(this._prefix("back"))),c}.bind(this)).wrapAll('<div class="flipper-element"></div>'),this.$el=this.container.find(".flipper-element"),this.container.show(),this._setOption("disabled",this.options.disabled),this._setDepth(),this._setSpeed(),this._setRotation(),this._bindEvents()},_setSpeed:function(b){if("number"!==a.type(this.options.speed))throw new Error(this.options.speed+" must be typeof Number");var c=parseFloat(this.options.speed);b&&(c=b>2?2:.1>b?.1:b),this.$el.css({transition:"all "+c+"s ease"})},_setDepth:function(b){if("number"!==a.type(this.options.depth))throw new Error(this.options.depth+" must be typeof Number");var c=parseInt(this.options.depth||b);c>2e3?c=2e3:100>c&&(c=100),this.container.css({perspective:c+"px"})},_setRotation:function(a){var b=this.$el;b.hasClass(this._prefix(this.options.rotationType))?b.switchClass(this._prefix(this.options.rotationType),this._prefix(a)):b.addClass(this._prefix(this.options.rotationType),this._prefix(a))},_setOption:function(a,b){switch(a){case"rotationType":this._setRotation(b);break;case"depth":var c=b=parseInt(b);this._setDepth(c);break;case"speed":var d=b=parseFloat(b);this._setSpeed(d);break;case"event":this._bindEvents(b);break;default:return}this._update(a,b)},toggleFlip:function(){this.$el.toggleClass("flipper-flipped")},_bindEvents:function(c){c&&(this.container.off(),this.options.eventListener=c);var d="ontouchstart"in b,e=d?"touchstart":"mousedown";if(a.isPlainObject(this.options.eventListener)){var f=this;a(b).on(this.options.eventListener.type,function(a){a.keyCode===f.options.eventListener.keyCode&&(f.toggleFlip(),a.stopImmediatePropagation())})}else this.options.eventListener.match(/click|touch/i)?this.container.on(e,this.toggleFlip.bind(this)):this.options.eventListener.match(/hover/i)&&this.container[this.options.eventListener](this.toggleFlip.bind(this),this.toggleFlip.bind(this))},_update:function(a,b){this.options[a]=b},_destroy:function(){this.container.removeClass("flipper-container").attr("style",""),this.$el.attr("style","").unwrap(),this.front.removeClass(this._prefix("front")).attr("style",""),this.back.removeClass(this._prefix("back")).attr("style",""),this.remove()}})}(jQuery,window,document);